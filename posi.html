<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>boos直聘</title>
<link rel="stylesheet" href="css/common.css">
<link rel="stylesheet" href="css/posi.css">
</head>
<body>

<div class="f_warpSearch">
    <div class="f_contant">
        <div class="f_search">
            <div class="f_sel">
                <span>全国</span>
                <i></i>
                <input type="text" placeholder="搜索职位、公司" class="f_text">
                <div class="f_positype">
                    <b>职位类型</b>
                </div>
                <div class="f_company">
                    <b>公司行业</b>
                </div>                
            </div>
            <button class="f_btn"></button>
        </div>
        <div class = "f_cityList">
            <ul></ul>
            <div class="f_sor">
            <p></p>
            </div>
        </div>
        <div class = "f_cityOist">
            <ol></ol>
            <div class="f_sor">
                <p></p>
            </div>
        </div>
        <div class="f_posiList">
            <ul class="f_posi_ul1"></ul>
            <ul class="f_posi_ul2"></ul>
            <ul class="f_posi_ul3"></ul>
            <div class="f_posi_sor">
                <p></p>
            </div>
        </div>
    </div>
</div>


<script src="jquery-1.8.3/jquery-1.8.3.js" ></script>
<script src="jquery-1.8.3/jquery.mousewheel.js"></script>
<script src="js/f_library.js"></script>
<script>

//单击职位选择
// $(".f_sel span").click(function(){
//     if($(".f_cityList").css("display") == "none"){
//         $(".f_cityList,.f_cityOist").css("display","block");
//         aja(forArr);
//         $(this).addClass("f_showCity bg");
//     }else{
//         $(".f_cityList,.f_cityOist").css("display","none");
//         $(this).removeClass("f_showCity bg");
//     } 
// })

function  ajaPosi(){
    $.ajax({
        url:"data/position.json",
        type:'get',
        dataType:'json',
        success:function(json){
            var jsonArr = json.zpData;
            var str = "";
            for(var i=0,len = jsonArr.length ; i < len ;i++){
                str += '<li code ='+ jsonArr[i].code +'>'+ jsonArr[i].name +'</li>'
            }
            $(".f_posiList .f_posi_ul1").html(str);
        }
    })
}
ajaPosi();
$(".f_posiList .f_posi_ul1").on("mousemove","li",function(e){
    var code = $(e.target).attr("code");
    $.ajax({
        url:"data/position.json",
        type:'get',
        dataType:'json',
        success:function(json){
            var jsonArr = json.zpData;
            for(var i=0,len = jsonArr.length ; i < len ;i++){
                if(code == jsonArr[i].code){
                    var str2 = "";
                    var lenArr = jsonArr[i].subLevelModelList;
                    for(var j=0,len=lenArr.length;j<len;j++){
                        str2 += '<li code = '+ lenArr[j].code +'>'+ lenArr[j].name +'</li>'; 
                    }
                    $(".f_posiList .f_posi_ul2").html(str2);
                }  
            }  
        }
    })
})
$(".f_posiList .f_posi_ul2").on("mousemove","li",function(e){
    var code = $(e.target).attr("code");
    $.ajax({
        url:"data/position.json",
        type:'get',
        dataType:'json',
        success:function(json){
            var jsonArr = json.zpData;
            var str = "";
            for(var i=0,len = jsonArr.length ; i < len ;i++){
                var josnJrr = jsonArr[i].subLevelModelList;
                for(var j=0,jen=josnJrr.length;j,j < jen; j++){
                    if(code == josnJrr[j].code){
                        var str = '';
                        var u3Arr = josnJrr[j].subLevelModelList;
                        for(var z=0,len=u3Arr.length;z<len;z++){
                                str += '<li>'+ u3Arr[z].name +'</li>'; 
                        }
                        $(".f_posiList .f_posi_ul3").html(str);
                    }  
                }
            }   
        }
    })
})


$(".f_posiList").on("mousemove",function(e){
    var pare = e.target.parentNode;
    if(pare.className == "f_posi_ul2"){
        $(".f_posi_ul3").css("display","block");
    }
    if($(pare).height() > 252 && e.target != this){
        $('.f_posiList .f_posi_sor').css("display","block");
        if(pare.className == "f_posi_ul1"){
            $(".f_posiList .f_posi_sor").css("left",168);
            $(".f_posi_ul3").css("display","none");
        }
        if(pare.className == "f_posi_ul2"){
            $(".f_posiList .f_posi_sor").css("left",336);
        }
        if(pare.className == "f_posi_ul3"){
            $(".f_posiList .f_posi_sor").css("left",564);
        }
    }else if(e.target.className == "f_posi_sor" || pare.className == "f_posi_sor"){
        $('.f_posiList .f_posi_sor').css("display","block");
        console.log(1)
    }else{
        $('.f_posiList .f_posi_sor').css("display","none");
    }
})



$(".f_posiList").on("mousewheel",function(e,delta){
    var pare = e.target.parentNode;
    console.log(pare);
    if(pare.className != "f_posiList"){
        var sor = $(pare).siblings();
        var sor_p = $(pare ).siblings().children();
        var uh = $(pare).height();
        var ph = $(sor_p).height();
        var fh = $(sor).height();
        var pf = fh - ph;
        var un = uh - fh;
        if(Math.floor(un / pf) < 2){
            var lTop = parseInt($(sor_p).css("top")) + -delta * Math.floor(un / pf) + (-3 * delta);
        }else{
            var lTop = parseInt($(sor_p).css("top")) + -delta * Math.floor(un / pf);
        }
        lTop = Math.abs(lTop);
        lTop = lTop < 0 ? 0 : lTop;
        lTop = lTop > 250 ? 250 : lTop;
        $(sor_p).css("top",lTop);
        $(pare).css("top",-lTop * Math.floor(un / pf));
    }
    console.log(uh,ph,fh);
    
    
})








</script>

</body>
</html>